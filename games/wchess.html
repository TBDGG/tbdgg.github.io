<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WChess - Wexer Games</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="nav-brand">
                <h1><a href="../index.html" style="color: inherit; text-decoration: none;">Wexer Games</a></h1>
            </div>
            <div class="nav-links">
                <a href="../index.html">–ì–ª–∞–≤–Ω–∞—è</a>
                <a href="../index.html#games">–ò–≥—Ä—ã</a>
                <a href="../index.html#shop">–ú–∞–≥–∞–∑–∏–Ω</a>
                <div class="user-section">
                    <span id="userInfo" style="display: none;">
                        <img id="userAvatar" src="" alt="–ê–≤–∞—Ç–∞—Ä" class="avatar-small">
                        <span id="userName"></span> | 
                        <span id="userCoins">0</span> WCoins
                        <button onclick="logout()" class="btn-logout">–í—ã–π—Ç–∏</button>
                    </span>
                </div>
            </div>
        </nav>
    </header>

    <main class="game-page">
        <div class="game-header">
            <h1>‚ôî WChess</h1>
            <p>–°—ã–≥—Ä–∞–π—Ç–µ –≤ —à–∞—Ö–º–∞—Ç—ã –ø—Ä–æ—Ç–∏–≤ –ò–ò</p>
        </div>

        <div class="difficulty-selector">
            <button class="difficulty-btn" onclick="setDifficulty(1)">–£—Ä–æ–≤–µ–Ω—å 1</button>
            <button class="difficulty-btn" onclick="setDifficulty(3)">–£—Ä–æ–≤–µ–Ω—å 3</button>
            <button class="difficulty-btn" onclick="setDifficulty(5)">–£—Ä–æ–≤–µ–Ω—å 5</button>
            <button class="difficulty-btn" onclick="setDifficulty(7)">–£—Ä–æ–≤–µ–Ω—å 7</button>
            <button class="difficulty-btn" onclick="setDifficulty(10)">–£—Ä–æ–≤–µ–Ω—å 10</button>
        </div>

        <div class="game-area placeholder">
            <div>
                <h3>–®–∞—Ö–º–∞—Ç–Ω–∞—è –¥–æ—Å–∫–∞</h3>
                <p>–¢–µ–∫—É—â–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å: <span id="currentDifficulty">1</span></p>
                <p>–ó–∞—Ä–∞–±–æ—Ç–∞–π—Ç–µ WCoins, –ø–æ–±–µ–∂–¥–∞—è –ò–ò!</p>
                <button class="btn-primary" onclick="simulateGame()">–°—ã–≥—Ä–∞—Ç—å –º–∞—Ç—á</button>
            </div>
        </div>
    </main>

    <script>
        let currentDifficulty = 1;

        function setDifficulty(level) {
            currentDifficulty = level;
            document.getElementById('currentDifficulty').textContent = level;
            
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
            document.querySelectorAll('.difficulty-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–µ
            event.target.classList.add('active');
        }

        function simulateGame() {
            const user = JSON.parse(localStorage.getItem('currentUser'));
            if (!user) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É!');
                return;
            }

            // –°–∏–º—É–ª—è—Ü–∏—è –∏–≥—Ä—ã - 70% —à–∞–Ω—Å –Ω–∞ –ø–æ–±–µ–¥—É –Ω–∞ –Ω–∏–∑–∫–∏—Ö —É—Ä–æ–≤–Ω—è—Ö
            const winChance = 0.7 - (currentDifficulty * 0.05);
            const isWin = Math.random() < winChance;
            
            if (isWin) {
                const coinsWon = 50 - (currentDifficulty * 2);
                alert(`üéâ –ü–æ–±–µ–¥–∞! –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ ${coinsWon} WCoins!`);
                if (typeof addCoins === 'function') {
                    addCoins(coinsWon, 'WChess');
                }
            } else {
                alert('üíî –ü–æ—Ä–∞–∂–µ–Ω–∏–µ! –ò–ò –æ–∫–∞–∑–∞–ª—Å—è —Å–ª–∏—à–∫–æ–º —Å–∏–ª—å–Ω—ã–º. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑!');
            }
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        document.addEventListener('DOMContentLoaded', function() {
            const user = localStorage.getItem('currentUser');
            if (!user) {
                window.location.href = '../login.html';
                return;
            }
            
            const userData = JSON.parse(user);
            document.getElementById('userInfo').style.display = 'block';
            document.getElementById('userName').textContent = userData.username;
            document.getElementById('userCoins').textContent = userData.coins || 0;
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–µ—Ä–≤—ã–π —É—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∫–∞–∫ –∞–∫—Ç–∏–≤–Ω—ã–π
            document.querySelector('.difficulty-btn').classList.add('active');
        });

        function logout() {
            localStorage.removeItem('currentUser');
            window.location.href = '../index.html';
        }
    </script>
</body>
</html>
